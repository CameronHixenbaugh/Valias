{"ast":null,"code":"var _s = $RefreshSig$();\n\nimport { atomFamily, selectorFamily, useRecoilState } from \"recoil\";\nimport { fetchAccountItems } from \"../flow/script.get-account-items\";\nimport { IDLE, PROCESSING } from \"../global/constants\";\nimport { hash } from \"../parts/ipfsUpload.comp\"; //import { Dict } from \"../parts/account-items-cluster.comp\"\n\nexport const $state = atomFamily({\n  key: \"account-items::state\",\n  default: selectorFamily({\n    key: \"account-items::default\",\n    get: address => async () => fetchAccountItems(address)\n  })\n});\nexport const $status = atomFamily({\n  key: \"account-items::status\",\n  default: IDLE\n});\nexport function useAccountItems(address) {\n  _s();\n\n  const [items, setItems] = useRecoilState($state(address));\n  const [status, setStatus] = useRecoilState($status(address));\n  return {\n    ids: items,\n    status,\n\n    async mint() {\n      setStatus(PROCESSING);\n      await fetch(process.env.REACT_APP_API_KITTY_ITEM_MINT, {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\"\n        },\n        body: JSON.stringify({\n          recipient: address,\n          // Random typeID between 1 - 5\n          //Math.floor(Math.random() * (5 - 1)) + 1\n          typeID: {\n            hash\n          }\n        })\n      });\n      await fetchAccountItems(address).then(setItems); //Dict()\n\n      setStatus(IDLE);\n    },\n\n    async refresh() {\n      setStatus(PROCESSING);\n      await fetchAccountItems(address).then(setItems);\n      setStatus(IDLE);\n    }\n\n  };\n}\n\n_s(useAccountItems, \"DmkXXUMosCXNAGhNP9LfFG5MUPY=\", false, function () {\n  return [useRecoilState, useRecoilState];\n});","map":{"version":3,"sources":["/Users/sky/Documents/Vaultv2_meta/web/src/hooks/use-account-items.hook.js"],"names":["atomFamily","selectorFamily","useRecoilState","fetchAccountItems","IDLE","PROCESSING","hash","$state","key","default","get","address","$status","useAccountItems","items","setItems","status","setStatus","ids","mint","fetch","process","env","REACT_APP_API_KITTY_ITEM_MINT","method","headers","body","JSON","stringify","recipient","typeID","then","refresh"],"mappings":";;AAAA,SAAQA,UAAR,EAAoBC,cAApB,EAAoCC,cAApC,QAAyD,QAAzD;AACA,SAAQC,iBAAR,QAAgC,kCAAhC;AACA,SAAQC,IAAR,EAAcC,UAAd,QAA+B,qBAA/B;AACA,SAASC,IAAT,QAAqB,0BAArB,C,CACA;;AAGA,OAAO,MAAMC,MAAM,GAAGP,UAAU,CAAC;AAC/BQ,EAAAA,GAAG,EAAE,sBAD0B;AAE/BC,EAAAA,OAAO,EAAER,cAAc,CAAC;AACtBO,IAAAA,GAAG,EAAE,wBADiB;AAEtBE,IAAAA,GAAG,EAAEC,OAAO,IAAI,YAAYR,iBAAiB,CAACQ,OAAD;AAFvB,GAAD;AAFQ,CAAD,CAAzB;AAQP,OAAO,MAAMC,OAAO,GAAGZ,UAAU,CAAC;AAChCQ,EAAAA,GAAG,EAAE,uBAD2B;AAEhCC,EAAAA,OAAO,EAAEL;AAFuB,CAAD,CAA1B;AAKP,OAAO,SAASS,eAAT,CAAyBF,OAAzB,EAAkC;AAAA;;AACvC,QAAM,CAACG,KAAD,EAAQC,QAAR,IAAoBb,cAAc,CAACK,MAAM,CAACI,OAAD,CAAP,CAAxC;AACA,QAAM,CAACK,MAAD,EAASC,SAAT,IAAsBf,cAAc,CAACU,OAAO,CAACD,OAAD,CAAR,CAA1C;AAGA,SAAO;AACLO,IAAAA,GAAG,EAAEJ,KADA;AAELE,IAAAA,MAFK;;AAIL,UAAMG,IAAN,GAAa;AACXF,MAAAA,SAAS,CAACZ,UAAD,CAAT;AACA,YAAMe,KAAK,CAACC,OAAO,CAACC,GAAR,CAAYC,6BAAb,EAA4C;AACrDC,QAAAA,MAAM,EAAE,MAD6C;AAErDC,QAAAA,OAAO,EAAE;AACP,0BAAgB;AADT,SAF4C;AAKrDC,QAAAA,IAAI,EAAEC,IAAI,CAACC,SAAL,CAAe;AACnBC,UAAAA,SAAS,EAAElB,OADQ;AAEnB;AACA;AACAmB,UAAAA,MAAM,EAAE;AAACxB,YAAAA;AAAD;AAJW,SAAf;AAL+C,OAA5C,CAAX;AAYA,YAAMH,iBAAiB,CAACQ,OAAD,CAAjB,CAA2BoB,IAA3B,CAAgChB,QAAhC,CAAN,CAdW,CAeX;;AACAE,MAAAA,SAAS,CAACb,IAAD,CAAT;AACD,KArBI;;AAsBL,UAAM4B,OAAN,GAAgB;AACdf,MAAAA,SAAS,CAACZ,UAAD,CAAT;AACA,YAAMF,iBAAiB,CAACQ,OAAD,CAAjB,CAA2BoB,IAA3B,CAAgChB,QAAhC,CAAN;AACAE,MAAAA,SAAS,CAACb,IAAD,CAAT;AACD;;AA1BI,GAAP;AA4BD;;GAjCeS,e;UACYX,c,EACEA,c","sourcesContent":["import {atomFamily, selectorFamily, useRecoilState} from \"recoil\"\nimport {fetchAccountItems} from \"../flow/script.get-account-items\"\nimport {IDLE, PROCESSING} from \"../global/constants\"\nimport { hash } from \"../parts/ipfsUpload.comp\"\n//import { Dict } from \"../parts/account-items-cluster.comp\"\n\n\nexport const $state = atomFamily({\n  key: \"account-items::state\",\n  default: selectorFamily({\n    key: \"account-items::default\",\n    get: address => async () => fetchAccountItems(address),\n  }),\n})\n\nexport const $status = atomFamily({\n  key: \"account-items::status\",\n  default: IDLE,\n})\n\nexport function useAccountItems(address) {\n  const [items, setItems] = useRecoilState($state(address))\n  const [status, setStatus] = useRecoilState($status(address))\n\n\n  return {\n    ids: items,\n    status,\n\n    async mint() {\n      setStatus(PROCESSING)\n      await fetch(process.env.REACT_APP_API_KITTY_ITEM_MINT, {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n        },\n        body: JSON.stringify({\n          recipient: address,\n          // Random typeID between 1 - 5\n          //Math.floor(Math.random() * (5 - 1)) + 1\n          typeID: {hash},\n        }),\n      })\n      await fetchAccountItems(address).then(setItems)\n      //Dict()\n      setStatus(IDLE)\n    },\n    async refresh() {\n      setStatus(PROCESSING)\n      await fetchAccountItems(address).then(setItems)\n      setStatus(IDLE)\n    },\n  }\n}"]},"metadata":{},"sourceType":"module"}